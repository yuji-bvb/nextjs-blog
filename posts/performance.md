---
title: "パフォーマンス"
date: "2021-01-13"
---

---

- パフォーマンスを理解しようとするとき最初のバイトまでの時間（TTFB）など、測定が容易な指標に集中しがち
- TTFB や同様の指標を理解することは重要だが、それらの指標が必ずしも全体像を伝えるとは限らない
- Chrome は、ユーザー体験を次の 3 つの要素に分解している

  - 読み込み : コンテンツが使用可能になるまでにどれくらいの時間が必要か
  - インタラクティビティ： ユーザーが Web サイトを操作する際に、どれくらい応答性がよいか
  - 視覚的な安定性 ：読み込み中にどれくらいページが移動するか

### First Paint と First Contentful Paint

- いずれもブラウザがナビゲーションを行った後に、ページが如何に早く表示されはじめるかを評価する指標
- First Paint:何らかが表示されたタイミング
- First Contentful Paint:テキストや画像のような何らかのコンテンツが表示されたタイミング
- いずれもサブリソースのロード状況やクリティカルレンダリングパスの状態を示唆し、Web ページのパフォーマンスを評価するのに役立つ

### Largest Contentful Paint

- プロダクトや Web ページの性質に依存しにくく、かつユーザー体験にも影響する指標として標準化が進んでいる
- ファーストビューにおいて占める割合が大きいコンテンツが表示されるタイミング
- Web ページのコンテンツの何が重要であるかは、プロダクトの提供者とユーザーの両方に依存するため標準化が難しいですが、ユーザー体験により繋がるであろう指標として期待されています。

### Long Tasks と Time to Interactive

- Web ページが表示されているのに、ボタンをクリックしても無反応など、なかなかインタラクティブにならないといった体験をしたことがある人も多いかと思う。レンダーツリーが構築されて描画が進んでいるものの、初期ロードで実行される JavaScript の処理がメインスレッドを長時間専有しているせいで、ユーザーアクションに対する応答処理を実行できていない状態であり、ユーザーにとっては大きなストレスである。
- Time to Interactive:Web ページが完全にインタラクティブになるまでの時間
- メインスレッドを長時間専有する処理は、ページロードにおいてもページ閲覧中においても問題
- 50 ミリ秒以上かかる処理を Long Tasks として定義し、それを検出する機能の標準化が進んでいる
